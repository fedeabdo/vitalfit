<!DOCTYPE html>
<html>

<head>
	<title>Vitalfit</title>
	<meta name="viewport" content="minimal-ui, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
	<meta name="msapplication-tap-highlight" content="no" />
	<meta name="format-detection" content="telephone=no" />

	<link rel="stylesheet" href="mobileui/mui.min.css" type="text/css">
	<link rel="stylesheet" href="custom/custom.css" type="text/css">
	<link rel="stylesheet" href="node_modules/keen-ui/dist/keen-ui.min.css">

	<script src="phonegap.js"></script>
	<script src="vendors/fastclick.min.js" type="text/javascript"></script>

	<script src="vendors/jquery.min.js" type="text/javascript"></script>
	<script src="vendors/jquery.animate-enhanced.js" type="text/javascript"></script>
	<script src="vendors/jqwait/jquery.wait.min.js" type="text/javascript"></script>
	<script src="vendors/iscroll-min.js" type="text/javascript"></script>

	<script src="mobileui/mui.min.js" type="text/javascript"></script>
	<script src="custom/custom.js" type="text/javascript"></script>

	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<!-- <script src="node_modules/keen-ui/dist/keen-ui.min.js"></script> -->


	<script>
		$(document).ready(() => {	
			
//******** INTERACCIONES CON LA BASE DE DATOS **********//

			$.ajax({
				type: 'GET',
				url: 'https://app-personal-trainer.herokuapp.com/clientes/',
				xhrFields: { withCredentials: true },
				crossDomain: true,
				success: function(data){
					homePage.alumnos = data
				}
			})
			

//******** OBJETOS VUE **********//

			const homePage = new Vue({
				el: "#home-page",
				data: {
					alumnos: [],
					alumnoSeleccionado: ""
				},
				methods: {
					nuevoAlumno: function() {
						mui.viewport.showPage("nuevoAlumno-page", 'DEF')
					},
					verAlumno: function() {
						verAlumno.alumno.nombre =this.alumnoSeleccionado.nombre.split(" ")[0]
						verAlumno.alumno.apellido = this.alumnoSeleccionado.nombre.split(" ")[1]
						if(this.alumnoSeleccionado.fecha_nacimiento != undefined){
							verAlumno.alumno.fecha_nacimiento = this.alumnoSeleccionado.fecha_nacimiento.split("T")[0]
						}
						verAlumno.alumno.nro_contacto = this.alumnoSeleccionado.nro_contacto
						verAlumno.alumno.mail = this.alumnoSeleccionado.mail
						mui.viewport.showPage("visualizarAlumno-page", 'DEF')
					},
					verPlanes: function(){
						verPlanes.alumno = this.alumnoSeleccionado
						mui.viewport.showPage("visualizarPlanes-page", 'DEF')
					},
					abrirPlanNuevo: function() {
						mui.viewport.showPage("planNuevo-page", 'DEF')
					},
					abrirNuevaSesion: function() {
						mui.viewport.showPage("nuevaSesion-page", 'DEF')
					},
					asignacionPlan: function() {
						mui.viewport.showPage("asignarPlan-page", 'DEF')
					},
					logout: function(){
						$.ajax({
							type: 'GET',
							url: 'https://app-personal-trainer.herokuapp.com/logout',
							xhrFields: { withCredentials: true },
							crossDomain: true,
							success: function(data){
								document.location.href = "index.html"
							}
						})
					},
					seleccionarAlumno(alumno){
						this.alumnoSeleccionado = alumno
					}
				}
			})

			const alumnoNuevo = new Vue({
				el: "#nuevoAlumno-page",
				data: {
					alumnos: [],
					alumno:{
						nombre: "",
						apellido: "",
						fechaDeNac: "",
						nroContacto: "",
						email: ""
					}
				},
				methods: {
					confirmarAlumno: function() {
						// this.alumnos.push(this.alumno)
						$.ajax({
							type: 'POST',
							url: 'https://app-personal-trainer.herokuapp.com/clientes/',
							xhrFields: { withCredentials: true },
							crossDomain: true,
							data: {
								'nombre': this.alumno.nombre + " " + this.alumno.apellido,
								'username': this.alumno.nombre.toLowerCase() + "." + this.alumno.apellido.split(" ")[0].toLowerCase(),
								'admin': false,
								'password': this.alumno.apellido,
								'fecha_nacimiento': this.alumno.fecha_nacimiento,
								'nro_contacto': this.alumno.nro_contacto,
								'mail': this.alumno.mail
							},
							dataType: 'json',
							success: (responseData)=>{
								alert(responseData)
							}

						})
						alert(this.alumno.nombre)
						this.alumno.nombre = ""
						this.alumno.apellido = ""
						this.alumno.fechaDeNac = ""
						this.alumno.nroContacto = ""
						this.alumno.email = ""
						mui.viewport.showPage("home-page", "DEF")
					}
				}
			})

			const verAlumno = new Vue({
				el:"#visualizarAlumno-page",
				data: {
					alumno: {
						nombre: "",
						apellido: "",
						fecha_nacimiento: "",
						nro_contacto: "",
						mail: ""
					}
				}
			})

			const planNuevo = new Vue({
				el: "#planNuevo-app",
				data: {
					nombrePlan: '',
					dias: [],
					nombreDia: "",
					indiceAux: 0,
					diaSeleccionado: {
						seleccionado: false,
						nombre: "",
						ejercicios: []
					}
				},
				methods: {
					agregarDia: function () {
						nro = this.dias.length + 1
						diaAux = {
							seleccionado: false,
							nombre: this.nombreDia,
							ejercicios:[]
						}
						diaAux.nombre = 'DIA ' + nro
						this.dias.push(diaAux)
						
					},
					quitarDia: function () {
						this.dias.pop()
					},
					diaNuevo: function (value) {
						this.dias[value - 1].seleccionado = true
						mui.viewport.showPage("diaNuevo-page", "DEF")
					},
					confirmarPlan: function() {
						mui.viewport.showPage("home-page", "DEF")
					},
					reasignarDia: function() {
						if ((store.state.diaSeleccionado.id - 1) > (-1)){
							//this.dias[store.diaSeleccionado.id - 1] = store.diaSeleccionado
						}
					}
				}
			})

			const diaNuevo = new Vue({
				el: '#diaNuevo-app',
				data: {
					ejerciciosHtml: [],
					ejercicios: [],
					ejercicio: {
						nombre: "",
						series: "",
						reps: "",
						intensidad: "",
						tiempo: ""
					}
				},
				methods: {
					agregarEjercicio: function () {
						nro = this.ejercicios.length + 1
						this.ejercicios.push(this.ejercicio)
						this.ejerciciosHtml.push('<div class= "col-80"><span><p>Ejercicio' + nro + '</p></span><p>Nombre:</p><input type="Text" v-model="ejercicios[' + nro + '].nombre"><br><p>Series:</p><input type="Number" v-model="ejercicios[' + nro + '].series"><br><p>Reps:</p><input type="Number" v-model="ejercicios[' + nro + '].reps"><br><p>Intensidad:</p><input type="Number" v-model="ejercicios[' + nro + '].intensidad"><br><p>Tiempo:</p><input type="Number" v-model="ejercicios[' + nro + '].tiempo"><br></div><br><hr style="width:95%; height:3px; border-width:0; color:gray; background-color:gray">')
					},
					confirmarEjercicio: function() {
						this.ejercicios = []
						mui.viewport.showPage("planNuevo-page", "DEF")
					}
				}
			})

			const sesionNueva = new Vue({
				el: '#nuevaSesion-app',
				data: {
					planes:[
						{
							nombre: 'Prueba',
							dias: ['DIA 1', 'DIA 2', 'DIA 3']
						}
					]
				},
				methods: {
					abrirDiaSesionNueva: function() {
						mui.viewport.showPage("nuevaSesionEjercicios-page", "DEF")
					},
					confirmarSesion: function() {
						mui.viewport.showPage("home-page", "DEF")
					}
				}
			})

			const ejerciciosSesion = new Vue({
				el: '#nuevaSesionEjercicios-app',
				data: {
					ejercicios: [
						{
						nombre: "Pecho Plano",
						series: "",
						reps: "",
						intensidad: "",
						tiempo: ""
						}
					]
				},
				methods: {
					confirmarSesionEjercicios: function() {
						mui.viewport.showPage("nuevaSesion-page", "DEF")
					}
				}
			})

			const verPlanes = new Vue({
				el: '#visualizarPlanes-page',
				data: {
					alumno: '',
					planes:[
						{
							nombre: 'Prueba',
							dias: ['DIA 1', 'DIA 2', 'DIA 3']
						}
					]
				},
				methods: {
					abrirEjerciciosVisualizar: function() {
						mui.viewport.showPage("visualizarEjercicios-page", "DEF")
					},
					cargarPlanes(){
						
					}
				}
			})

			const verEjercicios = new Vue({
				el: '#visualizarEjercicios-page',
				data: {
					ejercicios: [
						{
						nombre: "Pecho Plano",
						series: "3",
						reps: "10",
						intensidad: "10",
						tiempo: "60"
						}
					]
				},
				methods: {}
			})

			const asignarPlan = new Vue({
				el: '#asignarPlan-page',
				data: {
					planes: [
						{nombre: "Pecho"},
						{nombre: "torso"}
					]
				},
				methods: {}
			})
		})
	</script>
</head>

<body>
	<!-- Main wrapper. Importantly, think carefully before you change it or remove it. Do not recommend it. -->
	<!-- Main wrapper. Importante, Piénselo bien antes de cambiarlo o quitarlo. No se lo recomiendo. -->
	<div id="mui-screen" class="mui-viewport">
		<div id="mui-screen-page" class="mui-page">
			<!-- Ddefault viewport. Do not remove. It will make your life simpler and happy. -->
			<!-- ViewPort por defecto. No lo elimines. Hará tu vida más simple y feliz. -->
			<div id="mui-viewport" class="mui-viewport">


<!-- PAGINA INICIO -->


				<div id="home-page" class="mui-page">
					<div class="mui-page-header">
						<div class="mui-page-logo"></div>
						<a class="mui-headmenu" href="#"></a>
					</div>
					<div class="mui-page-body" id="home-body" style="overflow:scroll">
						<div>
							<div class="col-80">
								<br>
								<span>
									<input type="text" class="filtro_alumnos_input" onkeyup="filtro('.filtro_alumnos_input', '.lista_alumnos')" placeholder="Buscar por nombre">
									<button class="agregar_alumno_boton" @click="nuevoAlumno">＋</button>
								</span>
								<ul class="lista_alumnos"><br>
									<li v-for="alumno in alumnos">
										<a @click="seleccionarAlumno(alumno)" onclick="desplegarOpcionesOnclick(this)">{{ alumno.nombre }}</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>


<!-- CARGA DE DATOS NUEVO ALUMNO -->


				<div id='nuevoAlumno-page' class="mui-page">
					<div class="mui-page-header">
						<a class="mui-backarrow" href="#"></a>
						<div class='mui-page-title'>Carga de Datos - Nuevo Alumno</div>
						<a class="mui-headmenu" href="#"></a>
					</div>
					<div class="mui-page-body" id="second-body" style="overflow:scroll">
						<div class="col-80" id="nuevoAlumnoID">
							<br>
							<p>Nombre:</p><input type="text" placeholder="Nombre" v-model="alumno.nombre"><br>
							<p>Apellido:</p><input type="text" placeholder="Apellido" v-model="alumno.apellido"><br>
							<p>Fecha de Nacimiento:</p><input type="date" placeholder="Fecha de Nacimiento" v-model="alumno.fechaDeNac"><br>
							<p>Nro. de Contacto:</p><input type="tel" placeholder="Nro. de Contacto" v-model="alumno.nroContacto"><br>
							<p>Email:</p><input type="email" placeholder="Email" v-model="alumno.email"><br><br>
							<button class="confirmar_boton" @click="confirmarAlumno">Confirmar</button>
						</div>
					</div>
				</div>


<!-- VISUALIZAR ALUMNO -->


				<div id='visualizarAlumno-page' class="mui-page">
					<div class="mui-page-header">
						<a class="mui-backarrow" href="#"></a>
						<div class='mui-page-title'>Alumno</div>
						<a class="mui-headmenu" href="#"></a>
					</div>
					<div class="mui-page-body" id="second-body" style="overflow:scroll">
						<div class="col-80" id="vistaAlumno">
							<br>
							<p class="propiedad">Nombre:</p><p v-text="alumno.nombre"></p>
							<p class="propiedad">Apellido:</p><p v-text="alumno.apellido"></p>
							<p class="propiedad">Fecha de Nacimiento:</p><p v-text="alumno.fecha_nacimiento"></p>
							<p class="propiedad">Nro. de Contacto:</p><p v-text="alumno.nro_contacto"></p>
							<p class="propiedad">Email:</p><p v-text="alumno.mail"></p><br>
						</div>
					</div>
				</div>


<!-- CARGA DE DATOS PLAN NUEVO -->


				<div id='planNuevo-page' class="mui-page">
					<div class="mui-page-header">
						<a class="mui-backarrow" href="#"></a>
						<div class='mui-page-title'>Carga de Datos - Plan Nuevo</div>
						<a class="mui-headmenu" href="#"></a>
					</div>
					<div class="mui-page-body" id="second-body" style="overflow:scroll">
						<div id="planNuevo-app">
							<div class= "col-80">
								<br>
								<div>
									<label class="nombre_plan_label">Nombre del Plan: </label>
									<input v-model="nombrePlan" type="text" placeholder="Ingrese Nuevo Nombre" class="nombre_plan_input">
								</div>
							</div>
							<hr style="width:95%; height:3px; border-width:0; color:gray; background-color:gray">
							<br>
							<div class= "col-80">
								<span>
									<input type="text" class="filtro_dias_input" onkeyup="filtro('.filtro_dias_input', '.lista_dias')" placeholder="Buscar día">
								</span>
								<span>
									<button id="nuevoDia" class="agregar_boton" v-on:click="agregarDia">＋</button>
									<button id="quitarDia" class="quitar_boton" v-on:click="quitarDia">&minus;</button>
								</span>
							<hr style="width:95%; height:3px; border-width:0; color:gray; background-color:gray">
								<ul class="lista_dias">
									<li  v-for="(dia, index) in dias">
										<a v-on:click="diaNuevo(index)" v-text="dia.nombre"></a>
									</li>
								</ul>
								<br>
								<button class="confirmar_boton" @click="confirmarPlan">Confirmar</button>
							</div>
						</div>
					</div>
				</div>


<!-- CARGA DE EJERCICIOS AL DIA -->


				<div id='diaNuevo-page' class="mui-page">
					<div class="mui-page-header">
						<a class="mui-backarrow" href="#"></a>
						<div class='mui-page-title'>Carga de Datos - Día Nuevo</div>
						<a class="mui-headmenu" href="#"></a>
					</div>
					<div class="mui-page-body" id="second-body" style="overflow:scroll">
						<div id="diaNuevo-app">
							<br>
							<div class= "col-80">
								<button id="nuevoEjercicio" class="agregar_ejercicio_boton" v-on:click="agregarEjercicio">Agregar Ejercicio</button>
							</div>
							<ul class="lista_ejercicios">
								<hr style="width:95%; height:3px; border-width:0; color:gray; background-color:gray">
								<li v-for="ejercicio in ejerciciosHtml" v-html="ejercicio"></li>
							</ul>
							<br>
							<button class="confirmar_boton" @click="confirmarEjercicio">Confirmar</button>
						</div>
					</div>
				</div>


<!-- CARGA DE DATOS SESION NUEVA -->


				<div id="nuevaSesion-page" class="mui-page">
					<div class="mui-page-header">
						<a class="mui-backarrow" href="#"></a>
						<div class='mui-page-title'>Carga de Datos - Nueva Sesión</div>
						<a class="mui-headmenu" href="#"></a>
					</div>
					<div class="mui-page-body" id="second-body" style="overflow:scroll">
						<div>
							<div id="nuevaSesion-app">
								<div class="col-80">
									<br>
									<input type="text" class="filtro_planes_input" onkeyup="filtro('.filtro_planes_input', '.lista_planes')" placeholder="Buscar plan">
									<br>
									<ul class="lista_planes"><br>
										<li v-for='plan in planes'>
											<a onclick="desplegarDiasOnclick(this)">{{plan.nombre}}</a>
										</li>
									</ul>
								</div>
								<hr style="width:95%; height:3px; border-width:0; color:gray; background-color:gray">
								<br>
								<button class="confirmar_boton" @click="confirmarSesion">Confirmar</button>
							</div>
						</div>
					</div>
				</div>


<!-- CARGA DE SESION POR EJERCICIO -->


				<div id='nuevaSesionEjercicios-page' class="mui-page">
					<div class="mui-page-header">
						<a class="mui-backarrow" href="#"></a>
						<div class='mui-page-title'>Carga de Datos - Nueva Sesión</div>
						<a class="mui-headmenu" href="#"></a>
					</div>
					<div class="mui-page-body" id="second-body" style="overflow:scroll">
						<div id="nuevaSesionEjercicios-app">
							<br>
							<div class= "col-80">
							</div>
							<ul class="lista_sesion_ejercicios">
								<li v-for="ejercicio in ejercicios">
									<div class= "col-80">
										<span><p>{{ejercicio.nombre}}</p></span>
										<p>Series:</p><input type="Number" placeholder="Número de Series" v-model="ejercicio.series">
										<br>
										<p>Reps:</p><input type="Number" placeholder="Número de Repeticiones" v-model="ejercicio.reps">
										<br>
										<p>Intensidad:</p><input type="Number" placeholder="Intensidad Alcanzada" v-model="ejercicio.intensidad">
										<br>
										<p>Tiempo:</p><input type="Number" placeholder="Tiempo de Ejecución" v-model="ejercicio.tiempo">
										<br>
									</div>
									<br>
								</li>
							</ul>
							<hr style="width:95%; height:3px; border-width:0; color:gray; background-color:gray">
							<br>
							<button class="confirmar_boton" @click="confirmarSesionEjercicios">Confirmar</button>
						</div>
					</div>
				</div>


<!-- VISUALIZAR PLANES -->


				<div id="visualizarPlanes-page" class="mui-page">
					<div class="mui-page-header">
						<a class="mui-backarrow" href="#"></a>
						<div class='mui-page-title'>Planes</div>
						<a class="mui-headmenu" href="#"></a>
					</div>
					<div class="mui-page-body" id="second-body" style="overflow:scroll">
						<div>
							<div id="visualizarPlanes-app">
								<div class="col-80">
									<br>
									<input type="text" class="filtro_planes_input" onkeyup="filtro('.filtro_planes_input', '.lista_planes')" placeholder="Buscar plan">
									<br>
									<ul class="lista_planes_visualizar"><br>
										<li v-for='plan in planes'>
											<a onclick="desplegarDiasVisualizarOnclick(this)">{{plan.nombre}}</a>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>


<!-- VISUALIZAR EJERCICIOS -->


				<div id='visualizarEjercicios-page' class="mui-page">
					<div class="mui-page-header">
						<a class="mui-backarrow" href="#"></a>
						<div class='mui-page-title'>Ejercicios</div>
						<a class="mui-headmenu" href="#"></a>
					</div>
					<div class="mui-page-body" id="second-body" style="overflow:scroll">
						<br>
						<div class= "col-80">
						</div>
						<ul class="lista_sesion_ejercicios">
							<li v-for="ejercicio in ejercicios">
								<div class= "col-80">
									<p class="nombre_ejercicio">{{ejercicio.nombre}}</p>
									<br>
									<p>Series: {{ejercicio.series}}</p>
									<br>
									<p>Reps: {{ejercicio.reps}}</p>
									<br>
									<p>Intensidad: {{ejercicio.intensidad}}</p>
									<br>
									<p>Tiempo: {{ejercicio.tiempo}}</p>
									<br>
									<hr style="width:95%; height:3px; border-width:0; color:gray; background-color:gray">
									<br>
								</div>
								<br>
							</li>
						</ul>
					</div>
				</div>

<!-- ASIGNAR PLAN -->


				<div id="asignarPlan-page" class="mui-page">
					<div class="mui-page-header">
						<a class="mui-backarrow" href="#"></a>
						<div class='mui-page-title'>Asignar Plan</div>
						<a class="mui-headmenu" href="#"></a>
					</div>
					<div class="mui-page-body" id="second-body" style="overflow:scroll">
						<div>
							<div class="col-80">
								<p class="seleccionar_plan">Seleccionar Plan:</p>
								<br>
								<select class="planes_selector">
									<option v-for="plan in planes"></option>
								</select>
							</div>
						</div>
					</div>
				</div>


<!-- Copy the code of "template-page" to add more pages -->
<!-- Copie el código de template-plage para agregar más páginas -->

<!-- Optional.Toolbar out of mui-viewport to be omnipresent. Remove if not needed. -->
<!-- Opcional. Barra de herramientas fuera de mui-viewport para ser omnipresente. Elimínalo si no lo necesitas. -->


				<div class="mui-tabbar" id="footer">
					<ul class="mui-tabbar-list">
						<li class="mui-tabbar-button"><a href="#" id="tabbar-button1"></a></li>
						<li class="mui-tabbar-button"><a href="#" id="tabbar-button2"></a></li>
						<li class="mui-tabbar-button"><a href='#' id="tabbar-button3"></a></li>
					</ul>
				</div>
			</div>

			<!-- mui-screen level panel -->
			<!-- Panel a nivel de mui-screen -->
		
		</div>
		<div id="menu-panel" class="mui-panel">
			<div class="mui-panel-header">
				<div class='mui-panel-title'>Menu</div>
			</div>
			<div class="mui-panel-body">
				<div>
					<ul id='menuoptions' class='mui-list'>
						<li><a id='option1' href="#">Go Home Page</a></li>
						<li><a id='option2' href="#">Go Page 2</a></li>
						<li><a @click="logout">Cerrar sesión</a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
